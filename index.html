<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>music.</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="manifest" href="manifest.json">
<style>
:root {
--bg-light: #f4f4f4;
--bg-dark: #363737;
--text-light: #000;
--text-dark: #fff;
--button-bg: #46aae9;
}

body {
font-family: -apple-system, BlinkMacSystemFont, Helvetica, Arial, sans-serif;
background: var(--bg-light);
color: var(--text-light);
padding: 20px;
margin: 0;
display: flex;
flex-direction: column;
align-items: center;
transition: background 0.4s ease, color 0.4s ease;
}

body.dark-mode {
background: var(--bg-dark);
color: var(--text-dark);
}

h1 {
margin-bottom: 20px;
text-align: center;
}

.top-right {
position: absolute;
top: 20px;
right: 20px;
z-index: 100;
}

.toggle-button {
background: none;
border: none;
font-size: 1.5rem;
cursor: pointer;
color: inherit;
transition: color 0.4s ease;
}

.search-section, .iframe-section {
width: 100%;
max-width: 1000px;
margin-bottom: 30px;
display: flex;
flex-direction: column;
align-items: center;
}

input {
width: 70%;
padding: 0.5rem;
font-size: 1rem;
border: 1px solid #ccc;
border-radius: 6px;
}

button {
padding: 0.5rem 1rem;
font-size: 1rem;
background: var(--button-bg);
color: white;
border: none;
border-radius: 6px;
margin-left: 10px;
cursor: pointer;
}

.results {
margin-top: 20px;
display: flex;
flex-wrap: wrap;
gap: 15px;
justify-content: center;
}

.video-item {
cursor: pointer;
width: 300px;
background: white;
border: 1px solid #ccc;
border-radius: 6px;
overflow: hidden;
transition: box-shadow 0.2s;
text-align: center;
}

body.dark-mode .video-item {
background: #444;
color: white;
}

.video-item:hover {
box-shadow: 0 0 10px rgba(0,0,0,0.1);
}

.video-item img {
width: 100%;
}

.video-title {
padding: 10px;
font-size: 14px;
font-weight: bold;
}

.iframe {
width: 100%;
height: 560px;
display: none;
}

.iframe iframe {
width: 100%;
height: 100%;
border: none;
}
</style>
</head>
<body>
<!-- Dark Mode Toggle -->
<div class="top-right">
<button class="toggle-button" id="themeToggle" title="Toggle theme">‚òÄÔ∏è</button>
</div>

<!-- Title -->
<h1>music.</h1>

<!-- Search Section -->
<section class="search-section">
<input type="text" id="query" placeholder="Search YouTube...">
<button onclick="searchYouTube()">Search</button>
<div id="results" class="results"></div>
</section>

<!-- Iframe Section -->
<section class="iframe-section iframe" id="playerSection">
<iframe id="player" allow="autoplay; encrypted-media" allowfullscreen></iframe>
</section>

<script>
const apiKey = "AIzaSyDcIFol8bKEv2dbJPacvHMUOJembMRjowo";

function searchYouTube() {
const query = document.getElementById("query").value;
if (!query) return;

const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=10&q=${encodeURIComponent(query)}&key=${apiKey}`;

fetch(url)
.then(res => res.json())
.then(data => {
const results = document.getElementById("results");
results.innerHTML = "";
data.items.forEach(item => {
const videoId = item.id.videoId;
const title = item.snippet.title;
const thumbnail = item.snippet.thumbnails.medium.url;

const div = document.createElement("div");
div.className = "video-item";
div.innerHTML = `
<img src="${thumbnail}" alt="${title}">
<div class="video-title">${title}</div>
`;
div.onclick = () => purify(videoId);
results.appendChild(div);
});
})
.catch(err => console.error("YouTube API error:", err));
}

function purify(videoId) {
const player = document.getElementById("player");
const section = document.getElementById("playerSection");

player.src = `https://www.youtube-nocookie.com/embed/${videoId}`;
section.style.display = "block";

section.scrollIntoView({ behavior: 'smooth' });
}

// Dark Mode Toggle
const toggleButton = document.getElementById("themeToggle");

function setTheme(isDark) {
document.body.classList.toggle("dark-mode", isDark);
toggleButton.textContent = isDark ? "üåô" : "‚òÄÔ∏è";
localStorage.setItem("darkMode", isDark);
}

// Load theme on startup
const userPref = localStorage.getItem("darkMode") === "true";
setTheme(userPref);

toggleButton.addEventListener("click", () => {
const isDark = !document.body.classList.contains("dark-mode");
setTheme(isDark);
});
</script>
</body>
</html>
